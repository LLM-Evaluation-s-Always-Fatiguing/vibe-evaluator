<!DOCTYPE html>
<html lang="en" data-theme="luxury">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MCP Service Evaluation Report</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap"
      rel="stylesheet"
    />
    <!-- Import Tailwind CSS and DaisyUI CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://cdn.jsdelivr.net/npm/daisyui@3.9.4/dist/full.css"
      rel="stylesheet"
      type="text/css"
    />
    <!-- Import ECharts CDN -->
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <!-- Configure Tailwind and DaisyUI -->
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              gold: {
                50: "#FFF9E5",
                100: "#FFF0B3",
                200: "#FFE680",
                300: "#FFDB4D",
                400: "#FFD11A",
                500: "#FFCC00",
                600: "#E6B800",
                700: "#CCA300",
                800: "#B38F00",
                900: "#997A00",
              },
            },
          },
        },
        daisyui: {
          themes: [
            {
              luxury: {
                ...require("daisyui/src/theming/themes")["[data-theme=luxury]"],
                primary: "#FFD700", // Gold
                "primary-focus": "#E6C200", // Deep gold
                "primary-content": "#000000", // Black text
                secondary: "#B8860B", // Dark gold
                accent: "#DAA520", // Golden rod
                "base-100": "#000000", // Pure black background
                "base-200": "#0A0A0A", // Slightly brighter black
                "base-300": "#141414", // Deep gray-black
                neutral: "#272727", // Neutral color
              },
            },
          ],
        },
      };
    </script>
    <!-- Custom styles -->
    <style>
      body {
        background-color: #000000;
        color: rgba(255, 255, 255, 0.87);
      }
      .gradient-text {
        background: linear-gradient(135deg, #ffd700, #b8860b);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }
      .gradient-line::after {
        content: "";
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100px;
        height: 3px;
        background: linear-gradient(90deg, #ffd700, transparent);
      }
      .gradient-fill {
        background: linear-gradient(90deg, #b8860b, #ffd700);
      }
      /* Back to top button animation */
      .back-to-top {
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s;
      }
      .back-to-top.visible {
        opacity: 1;
        visibility: visible;
      }
      .glass-card {
        background: rgba(255, 255, 255, 0.05);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 215, 0, 0.1);
      }
      .metrics-item {
        transition: all 0.3s ease;
        border: 1px solid rgba(255, 215, 0, 0.1);
      }
      .metrics-item:hover {
        transform: translateY(-3px);
        box-shadow: 0 10px 25px rgba(255, 215, 0, 0.1);
        border-color: rgba(255, 215, 0, 0.3);
      }
      .hero-section {
      }
      .card {
        transition: all 0.3s ease;
        border: 1px solid rgba(184, 134, 11, 0.1);
      }
      .card:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 30px rgba(255, 215, 0, 0.1);
        border-color: rgba(255, 215, 0, 0.2);
      }
      .gold-border {
        border-color: rgba(255, 215, 0, 0.3);
      }
      .progress-gold::-webkit-progress-value {
        background-color: #ffd700;
      }
      .progress-gold::-moz-progress-bar {
        background-color: #ffd700;
      }
      .progress-gold {
        --value-color: #ffd700;
      }
      .divider::before,
      .divider::after {
        background-color: rgba(255, 215, 0, 0.3);
      }
      .badge-success {
        background-color: #006400 !important;
        color: #ffffff !important;
      }
      .badge-error {
        background-color: #8b0000 !important;
        color: #ffffff !important;
      }
      /* Add additional styles to ensure status badges display correctly */
      .status-badge {
        display: inline-block;
        min-width: 4rem;
        text-align: center;
        padding: 0.25rem 0.5rem;
        border-radius: 0.5rem;
        font-size: 0.75rem;
        font-weight: 500;
      }
      .status-success {
        background-color: #006400;
        color: #ffffff;
      }
      .status-error {
        background-color: #8b0000;
        color: #ffffff;
      }
      /* Reduce card padding */
      .card-body {
        padding: 1.25rem !important; /* Reduced from default 1.5rem to 1.25rem */
      }
      /* Add gradient effect for specific card titles */
      .card-body > .card-title.text-gold-500 {
        background: linear-gradient(135deg, #ffd700, #b8860b);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        font-weight: 600;
        letter-spacing: 0.5px;
        position: relative;
        display: inline-block;
        padding-bottom: 4px;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
      }

      .card-body > .card-title.text-gold-500::after {
        content: "";
        position: absolute;
        bottom: 0;
        left: 0;
        width: 40px;
        height: 2px;
        background: linear-gradient(90deg, #ffd700, transparent);
        border-radius: 2px;
      }

      /* Reset evaluation metric card title styles */
      .metrics-item .card-title.text-gold-500 {
        background: none;
        -webkit-text-fill-color: #ffd700;
        text-shadow: none;
        font-weight: 500;
        padding-bottom: 0;
      }

      .metrics-item .card-title.text-gold-500::after {
        display: none;
      }

      /* Enhance heading styles */
      .text-3xl.gradient-text {
        position: relative;
        padding-bottom: 0.75rem;
        text-transform: uppercase;
        letter-spacing: 1px;
        font-weight: 500;
      }

      .text-3xl.gradient-text::after {
        content: "";
        position: absolute;
        bottom: 0;
        left: 50%;
        transform: translateX(-50%);
        width: 80px;
        height: 3px;
        background: linear-gradient(90deg, transparent, #ffd700, transparent);
        border-radius: 3px;
      }
    </style>
  </head>
  <body class="font-[Roboto,sans-serif] leading-relaxed">
    <div class="container max-w-7xl mx-auto px-4 sm:px-6 py-6">
      <!-- Title Section -->
      <header class="mb-8 py-4">
        <h1 class="text-5xl font-bold text-center mb-2 gradient-text">
          MCP Service Evaluation Report
        </h1>
        <div class="w-32 h-1 mx-auto bg-gold-500 opacity-70 rounded-full"></div>
      </header>

      <!-- First Screen Section - Radar Chart and Overview -->
      <section class="hero-section mb-12">
        <div class="grid grid-cols-1 lg:grid-cols-5 gap-6">
          <!-- Left Side Radar Chart -->
          <div class="lg:col-span-2">
            <div
              class="card bg-base-200 shadow-xl h-full flex flex-col justify-center gold-border"
            >
              <div class="card-body">
                <h2 class="text-3xl font-medium mb-6 text-center gradient-text">
                  Service Capability Radar Chart
                </h2>
                <div class="w-full h-[400px] mx-auto" id="radar-chart"></div>
              </div>
            </div>
          </div>

          <!-- Right Side Content -->
          <div class="lg:col-span-3 flex flex-col gap-6">
            <!-- Overview Card -->
            <div class="card bg-base-200 shadow-xl gold-border">
              <div class="card-body">
                <h2 class="card-title text-xl text-gold-500">Service Capability Overview</h2>
                <div class="divider my-1"></div>
                <p id="capability-overview" class="prose"></p>
              </div>
            </div>

            <!-- Service Capabilities Module -->
            <div class="card bg-base-200 shadow-xl flex-grow gold-border">
              <div class="card-body">
                <h2 class="card-title text-xl text-gold-500">Service Capabilities (<span id="capability-count">0</span>)</h2>
                <div class="divider my-1"></div>
                <div id="capability-list" class="grid grid-cols-1 gap-4 max-h-80 overflow-y-auto pr-2"></div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Evaluation Metrics Section -->
      <section class="mb-12">
        <h2 class="text-3xl font-medium mb-6 text-center gradient-text">
          Evaluation Metrics
        </h2>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
          <div
            id="evaluation-metrics"
            class="col-span-full grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"
          ></div>
        </div>
      </section>

      <!-- Evaluation Task Details -->
      <section class="mb-12">
        <h2 class="text-3xl font-medium mb-6 text-center gradient-text">
          Evaluation Task Details
        </h2>
        <div class="card bg-base-200 shadow-xl gold-border">
          <div class="card-body">
            <div class="overflow-x-auto">
              <table class="table table-zebra w-full">
                <thead>
                  <tr class="border-b border-gold-500/30">
                    <th>ID</th>
                    <th>Description</th>
                    <th>Execution Result</th>
                    <th>Execution Time (s)</th>
                  </tr>
                </thead>
                <tbody id="evaluation-tasks"></tbody>
              </table>
            </div>
          </div>
        </div>
      </section>

      <footer
        class="text-center py-6 mt-12 text-base-content/60 text-sm border-t border-gold-500/30"
      >
        <p>Generation Time: <span id="generation-time"></span></p>
        <p class="mt-2 text-gold-300/40">© 2024 MCP Service Evaluation System</p>
      </footer>
    </div>

    <div
      id="back-to-top"
      class="back-to-top fixed bottom-8 right-8 btn btn-circle bg-gold-600 hover:bg-gold-500 text-black"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <path d="M12 19V5M5 12l7-7 7 7" />
      </svg>
    </div>

    <!-- Store the report data in a hidden element -->
    <div id="report-data" style="display:none;">REPORT_DATA_PLACEHOLDER</div>

    <script>
      // DOM loaded event handler
      document.addEventListener("DOMContentLoaded", function () {
        // Parse the report data
        const reportData = JSON.parse(document.getElementById("report-data").textContent);
        
        // Render the report with the data
        renderReport(reportData);

        // Initialize interactive elements
        initInteractions();

        // Set generation time
        document.getElementById("generation-time").textContent =
          new Date().toLocaleString("en-US");
      });

      // Render the report using the provided data
      function renderReport(data) {
        // Fill in the capability overview
        document.getElementById("capability-overview").textContent =
          data.capability_overview;

        // Render capability cards
        renderCapabilities(data.capability_list);

        // Render evaluation metrics
        renderMetrics(data.evaluation_metrics);

        // Render evaluation task table
        renderTasks(data.evaluation_tasks);

        // Draw the radar chart
        renderRadarChart(data.final_metric_scores);
      }

      // Render capability cards
      function renderCapabilities(capabilities) {
        const container = document.getElementById("capability-list");
        // Update capability count
        document.getElementById("capability-count").textContent = capabilities.length;

        capabilities.forEach((capability) => {
          const card = document.createElement("div");
          card.className =
            "bg-base-300 p-4 rounded-lg shadow-md hover:shadow-lg transition-all duration-300 relative overflow-hidden";

          // Add gradient border effect
          card.style.cssText = `
            background: rgba(20, 20, 20, 0.6);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
            position: relative;
            z-index: 1;
          `;

          // Create glowing border element
          const borderEffect = document.createElement("div");
          borderEffect.className = "absolute inset-0 z-0";
          borderEffect.style.cssText = `
            content: '';
            position: absolute;
            inset: 0;
            border-radius: 0.5rem;
            padding: 2px;
            background: linear-gradient(45deg, #ffd700, #b8860b, #ffd700);
            -webkit-mask: 
              linear-gradient(#fff 0 0) content-box, 
              linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            opacity: 0.7;
            transition: opacity 0.3s ease;
          `;

          card.appendChild(borderEffect);

          // Mouse hover effect
          card.addEventListener("mouseenter", () => {
            borderEffect.style.opacity = "1";
            borderEffect.style.filter =
              "drop-shadow(0 0 4px rgba(255, 215, 0, 0.5))";
          });

          card.addEventListener("mouseleave", () => {
            borderEffect.style.opacity = "0.7";
            borderEffect.style.filter = "";
          });

          const contentDiv = document.createElement("div");
          contentDiv.className = "relative z-10";

          const title = document.createElement("h4");
          title.className = "text-gold-500 text-lg font-medium mb-2";
          title.textContent = capability.name;

          const description = document.createElement("p");
          description.className = "text-base-content/70 text-sm";
          description.textContent = capability.description;

          contentDiv.appendChild(title);
          contentDiv.appendChild(description);
          card.appendChild(contentDiv);
          container.appendChild(card);
        });
      }

      // Render evaluation metrics
      function renderMetrics(metrics) {
        const container = document.getElementById("evaluation-metrics");

        metrics.forEach((metric, index) => {
          const item = document.createElement("div");
          item.className = "metrics-item card bg-base-300 shadow-md";

          const cardBody = document.createElement("div");
          cardBody.className = "card-body p-2";

          const title = document.createElement("h3");
          title.className = "card-title text-gold-500 text-sm";
          title.textContent = metric.name;

          const description = document.createElement("p");
          description.className = "text-base-content/70 text-xs mt-1";
          description.textContent = metric.description;

          cardBody.appendChild(title);
          cardBody.appendChild(description);
          item.appendChild(cardBody);
          container.appendChild(item);
        });
      }

      // Render evaluation task table
      function renderTasks(tasks) {
        const tbody = document.getElementById("evaluation-tasks");

        tasks.forEach((task, index) => {
          const row = document.createElement("tr");
          // Don't add bottom border to the last row
          row.className =
            index === tasks.length - 1
              ? "hover"
              : "hover border-b border-gold-500/10";

          // ID column
          const idCell = document.createElement("td");
          idCell.textContent = task.id;

          // Description column
          const descCell = document.createElement("td");
          descCell.textContent = task.description;

          // Execution result column
          let resultText = "";
          if (typeof task.execution_result === "string") {
            resultText = task.execution_result;
          } else {
            resultText = JSON.stringify(task.execution_result);
          }
          
          const resultCell = document.createElement("td");
          resultCell.textContent =
            resultText.length > 100
              ? resultText.substring(0, 100) + "..."
              : resultText;
          resultCell.title = resultText; // Show full result on hover
          resultCell.className = "cursor-pointer hover:text-gold-500";

          // Execution time column
          const timeCell = document.createElement("td");
          timeCell.textContent = task.execution_time.toFixed(3);

          // Add all cells to the row
          row.appendChild(idCell);
          row.appendChild(descCell);
          row.appendChild(resultCell);
          row.appendChild(timeCell);

          // Add row to the table
          tbody.appendChild(row);
        });
      }

      // Use ECharts to draw radar chart
      function renderRadarChart(scores) {
        // Initialize ECharts instance
        const chartDom = document.getElementById("radar-chart");
        const myChart = echarts.init(chartDom);

        // Process data
        const indicators = Object.entries(scores).map(([name, value]) => {
          return {
            name: name,
            max: 1.2,
          };
        });

        const seriesData = [
          {
            value: Object.values(scores),
            name: "Service Capability Score",
          },
        ];

        // Configuration - Black and gold color scheme
        const option = {
          backgroundColor: "transparent",
          tooltip: {
            trigger: "item",
            backgroundColor: "rgba(0, 0, 0, 0.85)",
            borderColor: "rgba(255, 215, 0, 0.8)",
            borderWidth: 2,
            padding: [10, 15],
            textStyle: {
              color: "#fff",
              fontSize: 14,
            },
            formatter: function (params) {
              // Make sure params is an array
              const paramsArray = Array.isArray(params) ? params : [params];

              // Radar chart only has one series of data, take the first one directly
              const param = paramsArray[0];

              // Error checking
              if (!param || !param.value) {
                return "Loading data...";
              }

              // Set title
              let tooltipContent = `
                <div style="text-align: center; margin-bottom: 12px;">
                  <span style="font-size: 16px; color: #ffd700; font-weight: bold;">Service Capability Score</span>
                </div>
              `;

              // Get all dimension values
              const metricsNames = Object.keys(scores);
              const values = param.value;

              // Add all metric scores
              tooltipContent += `<div style="margin-bottom: 6px;">`;

              // Loop to add data for each metric
              metricsNames.forEach((name, idx) => {
                // Safely get and format the value
                const value =
                  Array.isArray(values) && idx < values.length
                    ? typeof values[idx] === "number"
                      ? values[idx].toFixed(2)
                      : values[idx]
                    : scores[name].toFixed(2);

                // For the current hover metric add highlight style
                const isCurrentDimension = param.dimensionIndex === idx;

                // Build metric row
                tooltipContent += `
                  <div style="display: flex; align-items: center; margin-bottom: 8px; ${
                    isCurrentDimension
                      ? "background: rgba(255, 215, 0, 0.1); padding: 5px; border-radius: 4px;"
                      : ""
                  }">
                    <span style="display: inline-block; width: 8px; height: 8px; background: ${
                      isCurrentDimension ? "#ffd700" : "rgba(255, 215, 0, 0.6)"
                    }; border-radius: 50%; margin-right: 8px;"></span>
                    <span style="color: ${
                      isCurrentDimension ? "#ffd700" : "rgba(255, 215, 0, 0.9)"
                    }; flex: 1; ${
                  isCurrentDimension ? "font-weight: bold;" : ""
                }">${name}</span>
                    <span style="color: ${
                      isCurrentDimension
                        ? "#ffd700"
                        : "rgba(255, 255, 255, 0.9)"
                    }; margin-left: 10px; ${
                  isCurrentDimension ? "font-weight: bold;" : ""
                }">${value}</span>
                  </div>
                `;
              });

              tooltipContent += `</div>`;

              return tooltipContent;
            },
            extraCssText:
              "box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5); border-radius: 8px;",
          },
          radar: {
            indicator: indicators,
            shape: "polygon",
            splitNumber: 6,
            radius: "65%",
            center: ["50%", "50%"],
            name: {
              textStyle: {
                color: "rgba(255, 215, 0, 0.9)",
                fontSize: 12,
                fontWeight: "normal",
                padding: [4, 5],
              },
              formatter: function (value) {
                return value.replace(/\n/g, "\n");
              },
            },
            splitLine: {
              lineStyle: {
                color: "rgba(255, 215, 0, 0.1)",
              },
            },
            splitArea: {
              show: true,
              areaStyle: {
                color: ["rgba(255, 215, 0, 0.02)", "rgba(255, 215, 0, 0.04)"],
              },
            },
            axisLine: {
              lineStyle: {
                color: "rgba(255, 215, 0, 0.2)",
              },
            },
          },
          grid: {
            top: 40,
            bottom: 40,
            left: 40,
            right: 40,
          },
          series: [
            {
              name: "Service Capability Score",
              type: "radar",
              data: seriesData,
              symbol: "circle",
              symbolSize: 8,
              itemStyle: {
                color: "rgba(255, 215, 0, 1)", // Pure gold
              },
              lineStyle: {
                color: "rgba(255, 215, 0, 0.8)", // Gold lines
                width: 2,
              },
              areaStyle: {
                color: {
                  type: "linear",
                  x: 0,
                  y: 0,
                  x2: 0,
                  y2: 1,
                  colorStops: [
                    {
                      offset: 0,
                      color: "rgba(255, 215, 0, 0.5)", // Gold gradient start
                    },
                    {
                      offset: 1,
                      color: "rgba(184, 134, 11, 0.1)", // Dark gold gradient end
                    },
                  ],
                },
              },
              emphasis: {
                lineStyle: {
                  width: 3,
                },
                itemStyle: {
                  shadowBlur: 10,
                  shadowColor: "rgba(255, 215, 0, 0.5)",
                },
              },
            },
          ],
          animation: true,
          animationDuration: 2000,
        };

        // Use configuration to set the chart
        myChart.setOption(option);

        // Respond to window size changes
        window.addEventListener("resize", function () {
          myChart.resize();
        });
      }

      // Initialize interactive elements
      function initInteractions() {
        // Back to top button
        const backToTop = document.getElementById("back-to-top");

        // Listen for scroll events, control back to top button display
        window.addEventListener("scroll", function () {
          if (window.scrollY > 300) {
            backToTop.classList.add("visible");
          } else {
            backToTop.classList.remove("visible");
          }
        });

        // Click to go back to top
        backToTop.addEventListener("click", function () {
          window.scrollTo({
            top: 0,
            behavior: "smooth",
          });
        });

        // Add expand/collapse functionality for long text
        document.querySelectorAll("table td:nth-child(3)").forEach((cell) => {
          if (cell.textContent.length > 50) {
            cell.style.cursor = "pointer";
            cell.addEventListener("click", function () {
              alert(this.title);
            });
          }
        });
      }
    </script>
  </body>
</html> 